import{_ as c}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as l,c as i,a as n,b as s,d as a,w as r,e as t}from"./app-5a6cdbe2.js";const d={},u=n("h2",{id:"用户信息",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#用户信息","aria-hidden":"true"},"#"),s(" 用户信息")],-1),k=n("p",null,"和本框架对接的时候，有以下几种方式可以获取当前用户信息：",-1),m=n("h3",{id:"页面中的用户信息",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#页面中的用户信息","aria-hidden":"true"},"#"),s(" 页面中的用户信息")],-1),v={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},b=n("code",null,"userInfoStore",-1),h=t(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;用户id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&quot;邮箱&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;用户昵称 || 邮箱 || 手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">&quot;头像&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">&quot;权限id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token string">&quot;是否是管理员&quot;</span> <span class="token comment">// Boolean, true: 是, false: 否</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以在页面中 <code>\${userInfoStore.x}</code> (x 代表上述中的 key 值) 使用。</p><h3 id="接口获取用户信息" tabindex="-1"><a class="header-anchor" href="#接口获取用户信息" aria-hidden="true">#</a> 接口获取用户信息</h3><p>不论是前端页面还是后端接口都可以通过 <code>post</code> 访问 <code>https://xxx.xxx.xx/codeApi/getUserInfoApi</code> （域名为后端接口部署的域名）接口获得当前用户消息：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;用户id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&quot;邮箱&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;用户昵称 || 邮箱 || 手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">&quot;头像&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">&quot;权限id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token string">&quot;当前账户是否可用&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number，0: 禁用, 1: 启用</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token string">&quot;是否是管理员&quot;</span> <span class="token comment">// Boolean, true: 是, false: 否</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="接口获取某个用户的信息" tabindex="-1"><a class="header-anchor" href="#接口获取某个用户的信息" aria-hidden="true">#</a> 接口获取某个用户的信息</h3><p><code>post</code> <code>https://xxx.xxx.xx/codeApi/getUserInfoApi</code> （域名为后端接口部署的域名）接口可以指定获取某个用户消息：</p><p>参数 <code>body</code> ：<code>{ userId: 用户ID，可选输入，未输入时默认为当前用户 }</code>，返回结果如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;用户id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&quot;邮箱&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;用户昵称 || 邮箱 || 手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">&quot;头像&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">&quot;权限id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token string">&quot;当前账户是否可用&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number，0: 禁用, 1: 启用</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token string">&quot;是否是管理员&quot;</span> <span class="token comment">// Boolean, true: 是, false: 否</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="页面信息" tabindex="-1"><a class="header-anchor" href="#页面信息" aria-hidden="true">#</a> 页面信息</h2>`,10),g={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"pageInfo",-1),q=t(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;页面id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;页面标识key&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以在页面中 <code>\${pageInfo.x}</code> (x 代表上述中的 key(<code>id/key</code>) 值) 使用。</p><h2 id="权限控制" tabindex="-1"><a class="header-anchor" href="#权限控制" aria-hidden="true">#</a> 权限控制</h2><h3 id="页面中的权限信息" tabindex="-1"><a class="header-anchor" href="#页面中的权限信息" aria-hidden="true">#</a> 页面中的权限信息</h3>`,4),x={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},_=n("code",null,"pageAccess",-1),f=t(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token string">&quot;访问权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
  <span class="token literal-property property">editor</span><span class="token operator">:</span> <span class="token string">&quot;编辑权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
  <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token string">&quot;删除权限&quot;</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以在页面中 <code>\${pageAccess.x}</code> (x 代表上述中的 key 值) 使用。</p><h3 id="接口获取页面信息及权限信息" tabindex="-1"><a class="header-anchor" href="#接口获取页面信息及权限信息" aria-hidden="true">#</a> 接口获取页面信息及权限信息</h3><p>可以在前端、后端调接口 <code>post</code> <code>https://xxx.xxx.xx/codeApi/getPageInfoApi</code>（域名为后端接口部署的域名） 获取到页面的基本信息和权限信息：</p><p>参数为 <code>body</code> ：<code>{ key: 页面标识，必须输入，可以在接口中从页面参数传递 \${pageInfo.key} , userId: 用户ID，可选输入，未输入时则请求接口的 headers 必须包含当前用户的 Authorization</code>，返回的结果为：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;页面id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;页面名称&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&quot;页面链接&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;页面标识&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">folder</span><span class="token operator">:</span> <span class="token string">&quot;页面类型&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number, 0: 单页面, 1: 目录</span>
  <span class="token literal-property property">accessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面访问权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">editorAccessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面编辑权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">deleteAccessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面删除权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token string">&quot;页面是否启用&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number，0: 禁用, 1: 启用</span>
  <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&quot;页面版本&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">pageAccess</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 针对某个用户的权限（默认为当前用户）</span>
    <span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token string">&quot;访问权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
    <span class="token literal-property property">editor</span><span class="token operator">:</span> <span class="token string">&quot;编辑权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
    <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token string">&quot;删除权限&quot;</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),E=n("h2",{id:"系统公共变量",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#系统公共变量","aria-hidden":"true"},"#"),s(" 系统公共变量")],-1),S={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},I=n("code",null,"configMap",-1),A=n("code",null,"${configMap.x}",-1);function B(N,j){const e=o("ExternalLinkIcon"),p=o("RouterLink");return l(),i("div",null,[u,k,m,n("p",null,[s("所有页面都可以直接在 "),n("a",v,[s("数据链"),a(e)]),s(" 上查找到当前用户信息 "),b,s(" :")]),h,n("p",null,[s("所有页面都可以直接在 "),n("a",g,[s("数据链"),a(e)]),s(" 上查找到当前页面的信息 "),y,s(" :")]),q,n("p",null,[s("所有页面都可以直接在 "),n("a",x,[s("数据链"),a(e)]),s(" 上查找到当前用户信息对当前页面的权限信息 "),_,s(" :")]),f,n("p",null,[s("对接的其他接口可查看 "),a(p,{to:"/api/"},{default:r(()=>[s("API接口")]),_:1}),s("。")]),E,n("p",null,[s("在系统配置中配置的并且启用的 公共变量 所有页面都可以直接在 "),n("a",S,[s("数据链"),a(e)]),s(" 上查找到 "),I,s(" ，可以在页面中 "),A,s(" (x 代表 key 值) 使用。")]),n("p",null,[s("更详细的使用查看 "),a(p,{to:"/use/configMap.html"},{default:r(()=>[s("系统配置")]),_:1}),s("。")])])}const D=c(d,[["render",B],["__file","abutment.html.vue"]]);export{D as default};
