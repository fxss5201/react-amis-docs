import{_ as i,a as l}from"./20231130171106-a9b85a2b.js";import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as u,c as d,a as s,b as n,d as a,w as o,e as t}from"./app-cb04506a.js";const k={},v=s("h2",{id:"用户信息",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#用户信息","aria-hidden":"true"},"#"),n(" 用户信息")],-1),m=s("p",null,"和本框架对接的时候，有以下几种方式可以获取当前用户信息：",-1),b=s("h3",{id:"页面中的用户信息",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#页面中的用户信息","aria-hidden":"true"},"#"),n(" 页面中的用户信息")],-1),q={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},g=s("code",null,"userInfoStore",-1),y=t(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;用户id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&quot;邮箱&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;用户昵称 || 邮箱 || 手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">&quot;头像&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">&quot;权限id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token string">&quot;是否是管理员&quot;</span> <span class="token comment">// Boolean, true: 是, false: 否</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以在页面中 <code>\${userInfoStore.x}</code> (x 代表上述中的 key 值) 使用。</p><h3 id="接口获取用户信息" tabindex="-1"><a class="header-anchor" href="#接口获取用户信息" aria-hidden="true">#</a> 接口获取用户信息</h3><p>不论是前端页面还是后端接口都可以通过 <code>post</code> 访问 <code>https://xxx.xxx.xx/codeApi/getUserInfoApi</code> （域名为后端接口部署的域名）接口获得当前用户消息：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;用户id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&quot;邮箱&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;用户昵称 || 邮箱 || 手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">&quot;头像&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">&quot;权限id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token string">&quot;当前账户是否可用&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number，0: 禁用, 1: 启用</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token string">&quot;是否是管理员&quot;</span> <span class="token comment">// Boolean, true: 是, false: 否</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="接口获取某个用户的信息" tabindex="-1"><a class="header-anchor" href="#接口获取某个用户的信息" aria-hidden="true">#</a> 接口获取某个用户的信息</h3><p><code>post</code> <code>https://xxx.xxx.xx/codeApi/getUserInfoApi</code> （域名为后端接口部署的域名）接口可以指定获取某个用户消息：</p><p>参数 <code>body</code> ：<code>{ userId: 用户ID，可选输入，未输入时默认为当前用户 }</code>，返回结果如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;用户id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&quot;邮箱&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;用户昵称 || 邮箱 || 手机号&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">&quot;头像&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">&quot;权限id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token string">&quot;当前账户是否可用&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number，0: 禁用, 1: 启用</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token string">&quot;是否是管理员&quot;</span> <span class="token comment">// Boolean, true: 是, false: 否</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="页面信息" tabindex="-1"><a class="header-anchor" href="#页面信息" aria-hidden="true">#</a> 页面信息</h2>`,10),h={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},f=s("code",null,"pageInfo",-1),x=t(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;页面id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;页面标识key&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以在页面中 <code>\${pageInfo.x}</code> (x 代表上述中的 key(<code>id/key</code>) 值) 使用。</p><h2 id="权限控制" tabindex="-1"><a class="header-anchor" href="#权限控制" aria-hidden="true">#</a> 权限控制</h2><h3 id="页面中的权限信息" tabindex="-1"><a class="header-anchor" href="#页面中的权限信息" aria-hidden="true">#</a> 页面中的权限信息</h3>`,4),j={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},_=s("code",null,"pageAccess",-1),E=t(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token string">&quot;访问权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
  <span class="token literal-property property">editor</span><span class="token operator">:</span> <span class="token string">&quot;编辑权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
  <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token string">&quot;删除权限&quot;</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以在页面中 <code>\${pageAccess.x}</code> (x 代表上述中的 key 值) 使用。</p><h3 id="接口获取页面信息及权限信息" tabindex="-1"><a class="header-anchor" href="#接口获取页面信息及权限信息" aria-hidden="true">#</a> 接口获取页面信息及权限信息</h3><p>可以在前端、后端调接口 <code>post</code> <code>https://xxx.xxx.xx/codeApi/getPageInfoApi</code>（域名为后端接口部署的域名） 获取到页面的基本信息和权限信息：</p><p>参数为 <code>body</code> ：<code>{ key: 页面标识，必须输入，可以在接口中从页面参数传递 \${pageInfo.key} , userId: 用户ID，可选输入，未输入时则请求接口的 headers 必须包含当前用户的 Authorization</code>，返回的结果为：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;页面id&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number</span>
  <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;页面名称&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&quot;页面链接&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;页面标识&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">folder</span><span class="token operator">:</span> <span class="token string">&quot;页面类型&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number, 0: 单页面, 1: 目录</span>
  <span class="token literal-property property">accessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面访问权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">editorAccessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面编辑权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">deleteAccessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面删除权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token string">&quot;页面是否启用&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Number，0: 禁用, 1: 启用</span>
  <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&quot;页面版本&quot;</span><span class="token punctuation">,</span> <span class="token comment">// String</span>
  <span class="token literal-property property">pageAccess</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 针对某个用户的权限（默认为当前用户）</span>
    <span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token string">&quot;访问权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
    <span class="token literal-property property">editor</span><span class="token operator">:</span> <span class="token string">&quot;编辑权限&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
    <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token string">&quot;删除权限&quot;</span> <span class="token comment">// Boolean, true: 拥有权限, false: 未拥有权限</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),S=s("h2",{id:"系统公共变量",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#系统公共变量","aria-hidden":"true"},"#"),n(" 系统公共变量")],-1),F={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/datascope-and-datachain#%E6%95%B0%E6%8D%AE%E9%93%BE",target:"_blank",rel:"noopener noreferrer"},A=s("code",null,"configMap",-1),I=s("code",null,"${configMap.x}",-1),B=s("h2",{id:"系统方法",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#系统方法","aria-hidden":"true"},"#"),n(" 系统方法")],-1),w={href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/event-action#%E8%87%AA%E5%AE%9A%E4%B9%89-js",target:"_blank",rel:"noopener noreferrer"},N=t(`<p>通过配置<code>actionType: &#39;custom&#39;</code>实现自定义 JS。JS 中可以访问以下对象和方法：</p><ol><li><code>context</code>，渲染器上下文；</li><li><code>doAction()</code> 动作执行方法，用于调用任何 <code>actionType</code> 指定的动作；</li><li><code>event</code>，事件对象，可以调用 <code>setData()</code>、<code>stopPropagation()</code>、<code>preventDefault()</code>分别实现事件上下文设置、动作干预、事件干预，可以通过 <code>event.data</code> 获取事件上下文。</li></ol><p>这里主要使用的是 <code>context</code> 或 <code>event</code>。</p><h3 id="重新请求用户信息" tabindex="-1"><a class="header-anchor" href="#重新请求用户信息" aria-hidden="true">#</a> 重新请求用户信息</h3><p>无感刷新系统的用户信息 <code>queryUerInfoFn</code> ，使用方式如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;context.props.env.fanjimuFn.queryUerInfoFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event.context.env.fanjimuFn.queryUerInfoFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新请求菜单-包括正式环境和测试环境" tabindex="-1"><a class="header-anchor" href="#重新请求菜单-包括正式环境和测试环境" aria-hidden="true">#</a> 重新请求菜单（包括正式环境和测试环境）</h3><p>无感刷新系统的菜单 <code>queryMenuFn</code> ，使用方式如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;context.props.env.fanjimuFn.queryMenuFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event.context.env.fanjimuFn.queryMenuFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新请求正式环境菜单" tabindex="-1"><a class="header-anchor" href="#重新请求正式环境菜单" aria-hidden="true">#</a> 重新请求正式环境菜单</h3><p>无感刷新系统的菜单 <code>queryProdMenuFn</code> ，使用方式如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;context.props.env.fanjimuFn.queryProdMenuFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event.context.env.fanjimuFn.queryProdMenuFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新请求测试环境菜单" tabindex="-1"><a class="header-anchor" href="#重新请求测试环境菜单" aria-hidden="true">#</a> 重新请求测试环境菜单</h3><p>无感刷新系统的菜单 <code>queryQaMenuFn</code> ，使用方式如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;context.props.env.fanjimuFn.queryQaMenuFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event.context.env.fanjimuFn.queryQaMenuFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新请求系统配置" tabindex="-1"><a class="header-anchor" href="#重新请求系统配置" aria-hidden="true">#</a> 重新请求系统配置</h3><p>无感刷新系统配置 <code>queryConfigMapFn</code> ，使用方式如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;context.props.env.fanjimuFn.queryConfigMapFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event.context.env.fanjimuFn.queryConfigMapFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新请求成功回调" tabindex="-1"><a class="header-anchor" href="#重新请求成功回调" aria-hidden="true">#</a> 重新请求成功回调</h3><p>无感刷新请求成功回调 <code>querySuccessCallbackFn</code> ，使用方式如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;context.props.env.fanjimuFn.querySuccessCallbackFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event.context.env.fanjimuFn.querySuccessCallbackFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新请求系统外观配置" tabindex="-1"><a class="header-anchor" href="#重新请求系统外观配置" aria-hidden="true">#</a> 重新请求系统外观配置</h3><p>无感刷新系统外观配置 <code>queryLayoutConfigFn</code> ，使用方式如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;context.props.env.fanjimuFn.queryLayoutConfigFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;onEvent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;submitSucc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;weight&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event.context.env.fanjimuFn.queryLayoutConfigFn()&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ignoreError&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="成功回调" tabindex="-1"><a class="header-anchor" href="#成功回调" aria-hidden="true">#</a> 成功回调</h2><p>成功回调是用于在低代码中某些操作结束之后，无对应的操作事件去执行上面的系统方法时，可以在 <strong>系统设置</strong> / <strong>系统配置</strong> / <strong>成功回调</strong> 内进行配置，配置启用的接口会在调用成功之后，去调用系统方法来达到更新系统数据的目的。</p><figure><img src="`+i+'" alt="成功回调" tabindex="0" loading="lazy"><figcaption>成功回调</figcaption></figure><figure><img src="'+l+'" alt="成功回调配置的内容" tabindex="0" loading="lazy"><figcaption>成功回调配置的内容</figcaption></figure><h3 id="成功回调配置的内容" tabindex="-1"><a class="header-anchor" href="#成功回调配置的内容" aria-hidden="true">#</a> 成功回调配置的内容</h3>',43),T=s("li",null,[n("接口链接：接口是由类似 "),s("code",null,"${域名信息}${接口前缀}${接口链接}"),n(" 组成，"),s("strong",null,[n("注意接口链接需要带"),s("code",null,"/")]),n("；")],-1),C=s("li",null,"事件集：对应上面的系统方法，有 请求用户信息、请求系统配置、请求菜单、请求正式环境菜单、请求测试环境菜单、请求成功回调 等事件供选择，选择的事件集会在对应接口成功之后进行依次执行；",-1),M=s("li",null,"是否启用：只有启用的才会在接口成功之后执行，未启用的不执行。",-1);function z(D,L){const e=c("ExternalLinkIcon"),p=c("RouterLink");return u(),d("div",null,[v,m,b,s("p",null,[n("所有页面都可以直接在 "),s("a",q,[n("数据链"),a(e)]),n(" 上查找到当前用户信息 "),g,n(" :")]),y,s("p",null,[n("所有页面都可以直接在 "),s("a",h,[n("数据链"),a(e)]),n(" 上查找到当前页面的信息 "),f,n(" :")]),x,s("p",null,[n("所有页面都可以直接在 "),s("a",j,[n("数据链"),a(e)]),n(" 上查找到当前用户信息对当前页面的权限信息 "),_,n(" :")]),E,s("p",null,[n("对接的其他接口可查看 "),a(p,{to:"/api/"},{default:o(()=>[n("API接口")]),_:1}),n("。")]),S,s("p",null,[n("在系统配置中配置的并且启用的 公共变量 所有页面都可以直接在 "),s("a",F,[n("数据链"),a(e)]),n(" 上查找到 "),A,n(" ，可以在页面中 "),I,n(" (x 代表 key 值) 使用。")]),s("p",null,[n("更详细的使用查看 "),a(p,{to:"/use/configMap.html"},{default:o(()=>[n("系统配置")]),_:1}),n("。")]),B,s("p",null,[n("系统除了往数据域注入了常用的变量，也向其内注入了一些常用的方法。这里主要使用的 "),s("a",w,[n("事件动作 自定义 JS"),a(e)]),n("：")]),N,s("ol",null,[s("li",null,[n("接口前缀：选择接口对应的前缀，前缀取自配置的 "),a(p,{to:"/config/web.html#axiosbaseurl"},{default:o(()=>[n("axiosBaseURL")]),_:1}),n(" ；")]),T,C,M])])}const V=r(k,[["render",z],["__file","abutment.html.vue"]]);export{V as default};
