import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as a,e}from"./app-fe16b570.js";const p={},t=e(`<h2 id="基本权限设置" tabindex="-1"><a class="header-anchor" href="#基本权限设置" aria-hidden="true">#</a> 基本权限设置</h2><p>在 系统设置 -&gt; 权限设置 中进行整个系统权限的管理，权限中的管理员权限是禁止编辑和删除的，<strong>可否编辑页面</strong>仅控制<strong>页面编辑</strong>按钮是否显示。</p><p>在权限的配置上可以如下进行配置：</p><ol><li>管理员；</li><li>用户；</li><li>开发；</li><li>测试。</li></ol><p>管理员拥有所有页面的访问、编辑、删除权限，可以在每个目录、每个页面设置页面访问权限、页面编辑权限、页面删除权限。</p><p>目录的访问权限未配置的时候，整个目录下的页面都不可以访问（不论是否设置页面的访问权限）。</p><p>页面编辑权限对应页面的编辑、页面代码对比、菜单配置等。</p><p>页面删除权限对应页面的删除，注意：<strong>不建议直接删除页面，可以将页面的启用状态置为禁用，删除之后页面代码找不回</strong>。</p><h2 id="按钮级的权限控制" tabindex="-1"><a class="header-anchor" href="#按钮级的权限控制" aria-hidden="true">#</a> 按钮级的权限控制</h2><p>本框架提供增强型的权限控制，在页面中有注入当前的用户信息和当前用户可否访问/编辑/删除当前页面：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 当前的用户信息：userInfoStore</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;用户id&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&quot;邮箱&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;用户昵称 || 邮箱 || 手机号&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">&quot;头像&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">&quot;权限id&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token string">&quot;是否是管理员&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以在页面中 <code>\${userInfoStore.x}</code> (x 代表上述中的 key 值) 使用，如果针对某个权限 <code>\${1 === userInfoStore.accessId}</code>，如果针对某个具体用户功能 <code>\${1 === userInfoStore.id}</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 当前用户可否访问/编辑/删除当前页面：pageAccess</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token string">&quot;访问权限&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">editor</span><span class="token operator">:</span> <span class="token string">&quot;编辑权限&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token string">&quot;删除权限&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的 当前用户可否访问/编辑/删除当前页面 对应的就是编辑页面配置中的 页面访问权限/页面编辑权限/页面删除权限，例如某些删除操作的权限可以和当前页面的删除权限绑定，在删除按钮上设置 <code>&#39;visibleOn&#39;: &#39;\${pageAccess.delete}&#39;</code>，如果就可以将页面中的删除权限和页面配置中的页面删除权限绑定，实现权限可配置和可视化，在 系统设置 -&gt; 菜单设置 中可以更加全面的看到。</p><p>另外如果删除按钮的接口也需要做对应的权控制的话，可以在后端调接口 <code>https://xxx.xxx.xx/codeApi/getPageInfoApi</code>（域名为后端接口部署的域名） 获取到页面的基本信息和权限信息：</p><p>参数为：<code>{ key: 页面标识，必须输入, userId: 用户ID，可选输入，未输入时默认为当前用户 }</code>，返回的结果为：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;页面id&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;页面名称&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&quot;页面链接&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;页面标识&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">folder</span><span class="token operator">:</span> <span class="token string">&quot;页面类型， 0：单页面，1：目录&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面访问权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">editorAccessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面编辑权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">deleteAccessIds</span><span class="token operator">:</span> <span class="token string">&quot;页面删除权限，字符串形式 &#39;1,2,3&#39;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token string">&quot;页面是否启用，0：禁用，1：启用&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&quot;页面版本&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pageAccess</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 针对某个用户的权限（默认为当前用户）</span>
    <span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token string">&quot;访问权限&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">editor</span><span class="token operator">:</span> <span class="token string">&quot;编辑权限&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token string">&quot;删除权限&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),o=[t];function r(l,i){return n(),a("div",null,o)}const d=s(p,[["render",r],["__file","author.html.vue"]]);export{d as default};
